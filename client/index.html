<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>25 Years of political money</title>

  <!-- inject:css -->
  <link rel="stylesheet" href="app/app.css">
  <!-- endinject -->
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="app/data.js"></script>
  <script type="text/javascript" src="http://mbostock.github.com/d3/d3.geom.js?2.0.0"></script>
  <script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?2.0.0"></script>

</head>
<body>
<h1 id="title">25 Years of political money.</h1>
  <script type="text/javascript">

    var w = 960,
    h = 500,
    nodes = [];

    var svg = d3.select("body").append("svg:svg")
    .attr("width", w)
    .attr("height", h);

    var force = d3.layout.force()
    .charge(-20)
    .size([w, h])
    .nodes(nodes)
    .on("tick", tick)
    .start();

  function tick() {
    svg.selectAll("circle")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
    }

  var interval = setInterval(function() {
    var d = {
    x: w / 2 + 2 * Math.random() - 1,
    y: h / 2 + 2 * Math.random() - 1
    };

    svg.append("svg:circle")
      .data([d])
      .attr("r", 1e-6)
    .transition()
      .ease(Math.sqrt)
      .attr("r", 4.5);

    if (nodes.push(d) > 300) clearInterval(interval);
    force.start();
  }, 30);

  </script>
  <!-- inject:js -->
  <script src="app/app.js"></script>
  <!-- endinject -->
</body>
</html>
